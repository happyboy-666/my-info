<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="screen-orientation" content="portrait">
	<meta name="format-detection" content="telephone=no">
	<meta name="browsermode" content="application">
	<meta name="x5-page-mode" content="app">
	<title>个人信息</title>
	<style>
		body {
			max-width: 0 auto;
			margin: 0 auto;
		}

		ul,
		li {
			list-style: none;
			padding: 0;
			margin: 0;
		}

		.copy-demo {
			width: 100%;
			height: auto;
			overflow: hidden;
		}

		.li {
			padding: 20px;
			border-bottom: 1px solid #f0f0f0;
			overflow: hidden;
		}

		.copy-pp {
			color: #666;
			line-height: 1.2;
		}

		.copy-btn {
			background-color: cornflowerblue;
			color: #fff;
		}

		.copy-text {
			opacity: 0;
		}
	</style>
</head>

<body>




	<section class="copy-demo">
		<ul class="ul">
			<li class="li">
				<div class="copy-pp">
				<p>姓名：闫凯欣</p>
				<p>部门：梅钢-炼钢厂</p>
				<p>手机：18205091945</p>
				<p>邮箱：761858@baosteel.com</p>
				<img src="IMG_20220329_231031.jpg" width="99%" alt="名片"></img>
				</div>
				<button style="display:block;margin:0 auto" type="button" class="copy-btn js-copy-btn">点击复制文字</button>
				<textarea class="copy-text" value="" readonly="readonly"></textarea>
			</li>

		</ul>
	</section>


	<script type="text/javascript">
		// 复制文案功能:
		const jsCopy = function (obj) {

			function fn() {
				var u = navigator.userAgent;
				//苹果
				if (u.match(/(iPhone|iPod|iPad);?/i)) { //ios
					//   alert('苹果啊');
					//要复制文字的节点
					var copyDOM = obj.parentNode.children[0];

					var range = document.createRange();
					// 选中需要复制的节点
					range.selectNode(copyDOM);
					// 执行选中元素
					window.getSelection().addRange(range);
					// 执行 copy 操作
					var successful = document.execCommand('copy');
					try {
						var msg = successful ? 'successful' : 'unsuccessful';
						console.log('copy is' + msg);
					} catch (err) {
						console.log('Oops, unable to copy');
					}
					// 移除选中的元素
					window.getSelection().removeAllRanges();
					obj.innerHTML = '已复制'

				}
				// 安卓
				if (u.indexOf('Android') > -1) {
					//alert('安卓啊');
					var $copyPP = obj.parentNode.children[0],
						$copyText = obj.parentNode.children[2];
					$copyText.innerHTML = $copyPP.innerHTML.replace(/<[^>]+>/g, "");

					$copyText.select(); // 选择对象
					document.execCommand("Copy"); // 执行浏览器复制命令
					obj.innerHTML = '已复制';
				}
				// 安卓系统的UC浏览器
				if (u.indexOf('Android') > -1 && u.indexOf('UCBrowser') > -1) {
					obj.innerHTML = '点击复制文案';
					alert('若点击复制文案无效，请长按内容手动复制！');
				}
			}

			obj.addEventListener('click', fn, false);
		};

		//
		let copyBtns = document.querySelectorAll('.js-copy-btn');
		copyBtns.forEach((obj) => {
			jsCopy(obj);

		});
	</script>

</body>

</html>